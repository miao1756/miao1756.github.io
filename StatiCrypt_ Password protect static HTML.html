<!DOCTYPE html>
<!-- saved from url=(0061)file:///D:/website2/try2/miao1756.github.io/secret/index.html -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      
      <title>StatiCrypt: Password protect static HTML</title>
      <meta name="description" content="">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <style>
         body {
         font-size: 18px;
         }
      </style>
      <link rel="stylesheet" type="text/css" href="./StatiCrypt_ Password protect static HTML_files/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
      <link rel="stylesheet" href="./StatiCrypt_ Password protect static HTML_files/vue.css">
      <!-- font awesome -->
      <link rel="stylesheet" href="./StatiCrypt_ Password protect static HTML_files/all.css">
      <!-- change font -->
      <link href="./StatiCrypt_ Password protect static HTML_files/css" rel="stylesheet" async="">
   </head>
   <body>
      <div class="topnav" id="topnav">
         <a href="https://yk-liu.github.io/" class="active">Home</a>
         <a href="https://yk-liu.github.io/blog" target="_blank">Posts</a>
         <a href="https://yk-liu.github.io/blog/tags" target="_blank">Tags</a>
         <a href="https://yk-liu.github.io/about">About</a>
         <a href="https://github.com/yk-liu" target="_blank" style="text-decoration:none;float: right;">
         <i class="fab fa-github fa-lg"></i>
         </a>
      </div>
      <!-- link to topbar.css-->
      <link rel="stylesheet" href="./StatiCrypt_ Password protect static HTML_files/topbar.css">
      <div class="container">
         <div class="row">
            <h2>Encryption Setup</h2>
            <form id="encrypt_form">
               <div class="form-group">
                  <label for="passphrase">Password</label>
                  <input type="password" class="form-control" id="passphrase" placeholder="Password (choose a long one!)">
               </div>
               <div class="form-group">
                  <label for="unencrypted_html">HTML to encrypt</label>
                  <textarea class="form-control" id="unencrypted_html" placeholder="&lt;html&gt;&lt;head&gt;..." rows="3"></textarea>
               </div>
               <div class="form-group">
                  <label for="title">Page title</label>
                  <input type="text" class="form-control" id="title" placeholder="Default: &#39;This page is Protected&#39;">
               </div>
               <div class="form-group">
                  <label for="instructions">Instructions to display the user</label>
                  <input class="form-control" id="instructions" placeholder="Default: &#39;Contact blog owner for passphrase&#39; ">
               </div>
               <button class="btn btn-primary pull-right" type="submit">Generate protected HTML</button>
            </form>
         </div>
         <div class="row">
            <h3>Encrypted HTML</h3>
            <pre id="encrypted_html_display">ba0c43ee5454aaa0443ce7b7bef29e16cc0964278cbc652cb3962be0376e3cf8U2FsdGVkX184Jx6FzAEb6JEdSWSKDexsTk6t2EoV24Q=</pre>
            <p class="pull-right"><a class="btn btn-success download" download="encrypted.html" id="download-link" href="data:text/html,%3C!doctype%20html%3E%0A%3Chtml%20class%3D%22staticrypt-html%22%3E%0A%3Chead%3E%0A%20%20%20%20%3Cmeta%20charset%3D%22utf-8%22%3E%0A%20%20%20%20%3Ctitle%3EProtected%20Page%3C%2Ftitle%3E%0A%20%20%20%20%3Cmeta%20name%3D%22viewport%22%20content%3D%22width%3Ddevice-width%2C%20initial-scale%3D1%22%3E%0A%0A%20%20%20%20%3C!--%20do%20not%20cache%20this%20page%20--%3E%0A%20%20%20%20%3Cmeta%20http-equiv%3D%22cache-control%22%20content%3D%22max-age%3D0%22%2F%3E%0A%20%20%20%20%3Cmeta%20http-equiv%3D%22cache-control%22%20content%3D%22no-cache%22%2F%3E%0A%20%20%20%20%3Cmeta%20http-equiv%3D%22expires%22%20content%3D%220%22%2F%3E%0A%20%20%20%20%3Cmeta%20http-equiv%3D%22expires%22%20content%3D%22Tue%2C%2001%20Jan%201980%201%3A00%3A00%20GMT%22%2F%3E%0A%20%20%20%20%3Cmeta%20http-equiv%3D%22pragma%22%20content%3D%22no-cache%22%2F%3E%0A%0A%20%20%20%20%3Cstyle%3E%0A%20%20%20%20%20%20%20%20.staticrypt-hr%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20margin-top%3A%2020px%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20margin-bottom%3A%2020px%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20border%3A%200%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20border-top%3A%201px%20solid%20%23eee%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20.staticrypt-page%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20width%3A%20360px%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20padding%3A%208%25%200%200%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20margin%3A%20auto%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20box-sizing%3A%20border-box%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20.staticrypt-form%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20position%3A%20relative%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20z-index%3A%201%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20background%3A%20%23FFFFFF%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20max-width%3A%20360px%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20margin%3A%200%20auto%20100px%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20padding%3A%2045px%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20text-align%3A%20center%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20box-shadow%3A%200%200%2020px%200%20rgba(0%2C%200%2C%200%2C%200.2)%2C%200%205px%205px%200%20rgba(0%2C%200%2C%200%2C%200.24)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20.staticrypt-form%20input%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20outline%3A%200%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20background%3A%20%23f2f2f2%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20width%3A%20100%25%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20border%3A%200%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20margin%3A%200%200%2015px%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20padding%3A%2015px%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20box-sizing%3A%20border-box%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20font-size%3A%2014px%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20.staticrypt-form%20.staticrypt-decrypt-button%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20text-transform%3A%20uppercase%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20outline%3A%200%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20background%3A%20%234CAF50%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20width%3A%20100%25%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20border%3A%200%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20padding%3A%2015px%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20color%3A%20%23FFFFFF%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20font-size%3A%2014px%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20cursor%3A%20pointer%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20.staticrypt-form%20.staticrypt-decrypt-button%3Ahover%2C%20.staticrypt-form%20.staticrypt-decrypt-button%3Aactive%2C%20.staticrypt-form%20.staticrypt-decrypt-button%3Afocus%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20background%3A%20%2343A047%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20.staticrypt-html%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20height%3A%20100%25%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20.staticrypt-body%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20margin-bottom%3A%201em%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20background%3A%20%2376b852%3B%20%2F*%20fallback%20for%20old%20browsers%20*%2F%0A%20%20%20%20%20%20%20%20%20%20%20%20background%3A%20-webkit-linear-gradient(right%2C%20%2376b852%2C%20%238DC26F)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20background%3A%20-moz-linear-gradient(right%2C%20%2376b852%2C%20%238DC26F)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20background%3A%20-o-linear-gradient(right%2C%20%2376b852%2C%20%238DC26F)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20background%3A%20linear-gradient(to%20left%2C%20%2376b852%2C%20%238DC26F)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20font-family%3A%20%22Arial%22%2C%20sans-serif%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20-webkit-font-smoothing%3A%20antialiased%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20-moz-osx-font-smoothing%3A%20grayscale%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20.staticrypt-instructions%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20margin-top%3A%20-1em%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20margin-bottom%3A%201em%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20.staticrypt-title%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20font-size%3A%201.5em%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20.staticrypt-footer%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20position%3A%20fixed%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20height%3A%2020px%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20font-size%3A%2016px%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20padding%3A%202px%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20bottom%3A%200%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20left%3A%200%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20right%3A%200%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20margin-bottom%3A%200%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20.staticrypt-footer%20p%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20margin%3A%202px%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20text-align%3A%20center%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20float%3A%20right%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20.staticrypt-footer%20a%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20text-decoration%3A%20none%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%3C%2Fstyle%3E%0A%3C%2Fhead%3E%0A%0A%3Cbody%20class%3D%22staticrypt-body%22%3E%0A%3Cdiv%20class%3D%22staticrypt-page%22%3E%0A%20%20%20%20%3Cdiv%20class%3D%22staticrypt-form%22%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22staticrypt-instructions%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cp%20class%3D%22staticrypt-title%22%3EProtected%20Page%3C%2Fp%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cp%3EContact%20blog%20owner%20for%20passphrase%3C%2Fp%3E%0A%20%20%20%20%20%20%20%20%3C%2Fdiv%3E%0A%0A%20%20%20%20%20%20%20%20%3Chr%20class%3D%22staticrypt-hr%22%3E%0A%0A%20%20%20%20%20%20%20%20%3Cform%20id%3D%22staticrypt-form%22%20action%3D%22%23%22%20method%3D%22post%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cinput%20id%3D%22staticrypt-password%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3D%22password%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20name%3D%22password%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20placeholder%3D%22passphrase%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20autofocus%2F%3E%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cinput%20type%3D%22submit%22%20class%3D%22staticrypt-decrypt-button%22%20value%3D%22DECRYPT%22%2F%3E%0A%20%20%20%20%20%20%20%20%3C%2Fform%3E%0A%20%20%20%20%3C%2Fdiv%3E%0A%0A%3C%2Fdiv%3E%0A%3Cfooter%20class%3D%22staticrypt-footer%22%3E%0A%20%20%20%20%3Cp%20class%3D%22pull-right%22%3ECreated%20with%20%3Ca%20href%3D%22https%3A%2F%2Frobinmoisson.github.io%2Fstaticrypt%22%3EStatiCrypt%3C%2Fa%3E%3C%2Fp%3E%0A%3C%2Ffooter%3E%0A%0A%0A%3Cscript%20src%3D%22https%3A%2F%2Fcdnjs.cloudflare.com%2Fajax%2Flibs%2Fcrypto-js%2F3.1.9-1%2Fcrypto-js.min.js%22%20integrity%3D%22sha384-lp4k1VRKPU9eBnPePjnJ9M2RF3i7PC30gXs70%2BelCVfgwLwx1tv5%2BctxdtwxqZa7%22%20crossorigin%3D%22anonymous%22%3E%3C%2Fscript%3E%0A%0A%0A%3Cscript%3E%0A%20%20%20%20document.getElementById(&#39;staticrypt-form&#39;).addEventListener(&#39;submit&#39;%2C%20function(e)%20%7B%0A%20%20%20%20%20%20%20%20e.preventDefault()%3B%0A%0A%20%20%20%20%20%20%20%20var%20passphrase%20%3D%20document.getElementById(&#39;staticrypt-password&#39;).value%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20encryptedMsg%20%3D%20&#39;ba0c43ee5454aaa0443ce7b7bef29e16cc0964278cbc652cb3962be0376e3cf8U2FsdGVkX184Jx6FzAEb6JEdSWSKDexsTk6t2EoV24Q%3D&#39;%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20encryptedHMAC%20%3D%20encryptedMsg.substring(0%2C%2064)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20encryptedHTML%20%3D%20encryptedMsg.substring(64)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20decryptedHMAC%20%3D%20CryptoJS.HmacSHA256(encryptedHTML%2C%20CryptoJS.SHA256(passphrase).toString()).toString()%3B%0A%0A%20%20%20%20%20%20%20%20if%20(decryptedHMAC%20!%3D%3D%20encryptedHMAC)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20alert(&#39;Wrong%20passphrase!&#39;)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20%0A%09%09var%20plainHTML%20%3D%20CryptoJS.AES.decrypt(encryptedHTML%2C%20passphrase).toString(CryptoJS.enc.Utf8)%3B%0A%09%09%0A%09%09var%20request%20%3D%20new%20XMLHttpRequest()%3B%0A%09%09request.onreadystatechange%20%3D%20function()%20%7B%0A%09%09%09if%20(request.readyState%20%3D%3D%3D%204)%20%7B%0A%09%09%09%09if%20(request.status%20%3D%3D%3D%20200)%20%7B%0A%09%09%09%09%09document.body.className%20%3D%20&#39;ok&#39;%3B%0A%09%09%09%09%09var%20templateHTML%20%3D%20request.responseText%3B%0A%09%09%09%09%09var%20pageHTML%20%3D%20templateHTML.replace(%22%5B%5Bdecrypted%5D%5D%22%2C%20plainHTML)%3B%0A%09%09%09%09%09document.write(pageHTML)%3B%0A%09%09%09%09%09document.close()%3B%0A%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09console.log(%22There%20is%20a%20connection%20problem.%20Only%20plain%20HTML%20will%20be%20written.%22)%3B%20%0A%09%09%09%09document.write(%22There%20is%20a%20connection%20problem.%20Only%20plain%20HTML%20will%20be%20written.%22)%3B%0A%09%09%09%20%20%20%20document.write(plainHTML)%3B%0A%09%09%09%09document.close()%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%20else%20%7B%0A%09%09%09%20%20%20%20console.log(%22The%20computer%20appears%20to%20be%20offline%2C%20or%20there%20is%20a%20connection%20problem.%20Only%20plain%20HTML%20will%20be%20written.%22)%3B%20%0A%09%09%09%09document.write(%22The%20computer%20appears%20to%20be%20offline%2C%20or%20there%20is%20a%20connection%20problem.%20Only%20plain%20HTML%20will%20be%20written.%22)%3B%0A%09%09%09%20%20%20%20document.write(plainHTML)%3B%0A%09%09%09%09document.close()%3B%0A%09%09%09%7D%3B%0A%09%09%7D%3B%0A%09%09request.open(%22GET%22%2C%20%22https%3A%2F%2Fyk-liu.github.io%2Fsecret%2Fencrypt%2Fpost.html%22%20%2C%20true)%3B%0A%09%09request.send(null)%3B%0A%20%20%20%20%20%0A%20%20%20%20%7D)%3B%0A%3C%2Fscript%3E%0A%3C%2Fbody%3E%0A%3C%2Fhtml%3E%0A">Download html file with password prompt</a></p>
         </div>
      </div>
      <!--
         Crypto JS 3.1.9-1
         Copied as is from https://cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.9-1/crypto-js.js
         Filename changed to circumvent adblockers that mistake it for a crypto miner (see https://github.com/robinmoisson/staticrypt/issues/107)
         -->
      <script src="./StatiCrypt_ Password protect static HTML_files/kryptojs-3.1.9-1-lib.js.下载"></script>
      <script>
         var htmlToDownload;
         
         var renderTemplate = function (tpl, data) {
             return tpl.replace(/{(.*?)}/g, function (_, key) {
                 return data && data[key] || '';
             });
         };
         
         /**
          * Fill the password prompt template with data provided.
          * @param data
          */
         var setFileToDownload = function (data) {
             var request = new XMLHttpRequest();
             request.open('GET', 'https://yk-liu.github.io/secret/encrypt/decrypt-template.html', true);
             request.onload = function() {
                 var renderedTmpl = renderTemplate(request.responseText, data);
         
                 var downloadLink = document.querySelector('a.download');
                 downloadLink.href = 'data:text/html,' + encodeURIComponent(renderedTmpl);
                 downloadLink.removeAttribute('disabled');
         
                 htmlToDownload = renderedTmpl;
             };
             request.send();
         };
         
         /**
          * Handle form submission.
          */
         document.getElementById('encrypt_form').addEventListener('submit', function (e) {
             e.preventDefault();
           
             var unencrypted = document.getElementById('unencrypted_html').value;
             var passphrase = document.getElementById('passphrase').value;
         
             var encrypted = CryptoJS.AES.encrypt(unencrypted, passphrase);
             var hmac = CryptoJS.HmacSHA256(encrypted.toString(), CryptoJS.SHA256(passphrase).toString()).toString();
             var encryptedMsg = hmac + encrypted;
         
             var pageTitle = document.getElementById('title').value.trim();
             var instructions = document.getElementById('instructions').value;
             var data = {
                 title: pageTitle ? pageTitle : 'Protected Page',
                 instructions: instructions ? instructions : 'Contact blog owner for passphrase',
                 encrypted: encryptedMsg
             };
         
             document.getElementById('encrypted_html_display').textContent = encryptedMsg;
         
             setFileToDownload(data);
             
         
         });
         
          /**
          * Browser specific download code.
          */
         document.getElementById('download-link')
             .addEventListener('click', function (e) {
         
             var isIE = (navigator.userAgent.indexOf("MSIE") !== -1 ) || (!!document.documentMode === true ); // >= 10
             var isEdge = navigator.userAgent.indexOf("Edge") !== -1;
         
             // download with MS specific feature
             if (htmlToDownload && (isIE || isEdge)) {
                 e.preventDefault();
                 var blobObject = new Blob([htmlToDownload]);
                 window.navigator.msSaveOrOpenBlob(blobObject, 'encrypted.html');
             }
         
             return true;
         })
      </script>
   
</body></html>